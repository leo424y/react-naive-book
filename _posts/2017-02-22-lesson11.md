---
layout: post
title: é…ç½®å…ƒä»¶çš„ props
description: React.js å°æ›¸æ˜¯ä¸€å€‹é–‹æºã€å…è²»ã€å°ˆæ¥­ã€ç°¡å–®çš„ React.js æ•™ç¨‹ã€‚ä¸åŒçš„å ´æ™¯ä¸‹å°å…ƒä»¶çš„éœ€æ±‚å¯èƒ½æœƒæœ‰æ‰€ä¸åŒï¼Œprops å¯ä»¥å¹«åŠ©æˆ‘å€‘é”åˆ°é€™å€‹æ•ˆæœã€‚æœ¬æ–‡ä»‹ç´¹é…ç½®å…ƒä»¶ props çš„ç”¨æ³•ã€‚
tags: [React.js,React.js å°æ›¸,æ•™ç¨‹,props,å…ƒä»¶]
---

<ul style='font-size: 14px;'>
  <li>
    ä½œè€…ï¼š<a href="https://www.zhihu.com/people/hu-zi-da-ha" target="_blank">é¬å­å¤§å“ˆ</a>
  </li>
  <li>
    åŸæ–‡é€£çµï¼š<a href="http://huziketang.com/books/react{{ page.url }}"> http://huziketang.com/books/react{{ page.url }} </a>
  </li>
  <li>è½‰è¼‰è«‹è¨»æ˜å‡ºè™•ï¼Œä¿ç•™åŸæ–‡é€£çµå’Œä½œè€…è³‡è¨Šã€‚</li>
</ul>

{% raw  %}
å…ƒä»¶æ˜¯ç›¸äº’ç¨ç«‹ã€å¯è¤‡ç”¨çš„å–®å…ƒï¼Œä¸€å€‹å…ƒä»¶å¯èƒ½åœ¨ä¸åŒåœ°æ–¹è¢«ç”¨åˆ°ã€‚ä½†æ˜¯åœ¨ä¸åŒçš„å ´æ™¯ä¸‹å°é€™å€‹å…ƒä»¶çš„éœ€æ±‚å¯èƒ½æœƒæ ¹æ“šæƒ…æ³æœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ä¸€å€‹é»è´ŠæŒ‰éˆ•å…ƒä»¶ï¼Œåœ¨æˆ‘é€™è£¡éœ€è¦å®ƒé¡¯ç¤ºçš„æ–‡å­—æ˜¯â€œé»è´Šâ€å’Œâ€œå–æ¶ˆâ€ï¼Œç•¶åˆ¥çš„åŒäº‹æ‹¿éå»ç”¨çš„æ™‚å€™ï¼Œå»éœ€è¦å®ƒé¡¯ç¤ºâ€œè´Šâ€å’Œâ€œå·²è´Šâ€ã€‚å¦‚ä½•è®“å…ƒä»¶èƒ½é©æ‡‰ä¸åŒå ´æ™¯ä¸‹çš„éœ€æ±‚ï¼Œæˆ‘å€‘å°±è¦è®“å…ƒä»¶å…·æœ‰ä¸€å®šçš„â€œå¯é…ç½®â€æ€§ã€‚

 React.js çš„ `props` å°±å¯ä»¥å¹«åŠ©æˆ‘å€‘é”åˆ°é€™å€‹æ•ˆæœã€‚æ¯å€‹å…ƒä»¶éƒ½å¯ä»¥æ¥å—ä¸€å€‹ `props` åƒæ•¸ï¼Œå®ƒæ˜¯ä¸€å€‹ç‰©ä»¶ï¼ŒåŒ…å«äº†æ‰€æœ‰ä½ å°é€™å€‹å…ƒä»¶çš„é…ç½®ã€‚å°±æ‹¿æˆ‘å€‘é»è´ŠæŒ‰éˆ•åšä¾‹å­ï¼š

<a href="http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png" target="_blank">![React.js å°æ›¸æ•™ç¨‹åœ–ç‰‡](http://huzidaha.github.io/static/assets/img/posts/B7575C67-64F8-4A13-9C63-4D6805FA360D.png)</a>

ä¸‹é¢çš„ç¨‹å¼ç¢¼å¯ä»¥è®“å®ƒé”åˆ°ä¸Šè¿°çš„å¯é…ç½®æ€§ï¼š

```javascript
class LikeButton extends Component {
  function Object() { [native code] } () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    const likedText = this.props.likedText || 'å–æ¶ˆ'
    const unlikedText = this.props.unlikedText || 'é»è´Š'
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked ? likedText : unlikedText} ğŸ‘
      </button>
    )
  }
}
```

å¾  `render` å‡½æ•¸å¯ä»¥çœ‹å‡ºä¾†ï¼Œå…ƒä»¶å…§éƒ¨æ˜¯é€šé `this.props`  çš„æ–¹å¼ç²å–åˆ°å…ƒä»¶çš„åƒæ•¸çš„ï¼Œå¦‚æœ `this.props` è£¡é¢æœ‰éœ€è¦çš„å±¬æ€§æˆ‘å€‘å°±æ¡ç”¨ç›¸æ‡‰çš„å±¬æ€§ï¼Œæ²’æœ‰çš„è©±å°±ç”¨é è¨­çš„å±¬æ€§ã€‚

é‚£éº¼æ€éº¼æŠŠ `props` å‚³é€²å»å‘¢ï¼Ÿ*åœ¨ä½¿ç”¨ä¸€å€‹å…ƒä»¶çš„æ™‚å€™ï¼Œå¯ä»¥æŠŠåƒæ•¸æ”¾åœ¨æ¨™ç±¤çš„å±¬æ€§ç•¶ä¸­ï¼Œæ‰€æœ‰çš„å±¬æ€§éƒ½æœƒä½œç‚º `props` ç‰©ä»¶çš„éµå€¼*ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton likedText='å·²è´Š' unlikedText='è´Š' />
      </div>
    )
  }
}
```

å°±åƒä½ åœ¨ç”¨æ™®é€šçš„ HTML æ¨™ç±¤çš„å±¬æ€§ä¸€æ¨£ï¼Œå¯ä»¥æŠŠåƒæ•¸æ”¾åœ¨è¡¨ç¤ºå…ƒä»¶çš„æ¨™ç±¤ä¸Šï¼Œå…ƒä»¶å…§éƒ¨å°±å¯ä»¥é€šé `this.props` ä¾†è¨ªå•åˆ°é€™äº›é…ç½®åƒæ•¸äº†ã€‚

<a href="http://huzidaha.github.io/static/assets/img/posts/1D4C87F2-9B05-47CE-8144-1154B5CB1FC3.png" target="_blank">![React.js å°æ›¸æ•™ç¨‹åœ–ç‰‡](http://huzidaha.github.io/static/assets/img/posts/1D4C87F2-9B05-47CE-8144-1154B5CB1FC3.png)</a>

å‰é¢çš„ç« ç¯€æˆ‘å€‘èªªéï¼ŒJSX çš„è¡¨ç¤ºå¼æ’å…¥å¯ä»¥åœ¨æ¨™ç±¤å±¬æ€§ä¸Šä½¿ç”¨ã€‚æ‰€ä»¥å…¶å¯¦å¯ä»¥æŠŠä»»ä½•é¡å‹çš„è³‡æ–™ä½œç‚ºå…ƒä»¶çš„åƒæ•¸ï¼ŒåŒ…æ‹¬å­—å…ƒä¸²ã€æ•¸å­—ã€ç‰©ä»¶ã€é™£åˆ—ã€ç”šè‡³æ˜¯å‡½æ•¸ç­‰ç­‰ã€‚ä¾‹å¦‚ç¾åœ¨æˆ‘å€‘æŠŠä¸€å€‹ç‰©ä»¶å‚³çµ¦é»è´Šå…ƒä»¶ä½œç‚ºåƒæ•¸ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton wordings={{likedText: 'å·²è´Š', unlikedText: 'è´Š'}} />
      </div>
    )
  }
}
```

ç¾åœ¨æˆ‘å€‘æŠŠ `likedText` å’Œ `unlikedText` é€™å…©å€‹åƒæ•¸å°è£åˆ°ä¸€å€‹å« `wordings` çš„ç‰©ä»¶åƒæ•¸å…§ï¼Œç„¶å¾Œå‚³å…¥é»è´Šå…ƒä»¶ä¸­ã€‚å¤§å®¶çœ‹åˆ° `{{likedText: 'å·²è´Š', unlikedText: 'è´Š'}}` é€™æ¨£çš„ç¨‹å¼ç¢¼çš„æ™‚å€™ï¼Œä¸è¦ä»¥ç‚ºæ˜¯ä»€éº¼æ–°èªæ³•ã€‚ä¹‹å‰è¨è«–éï¼ŒJSX çš„ `{}` å…§å¯ä»¥åµŒå…¥ä»»ä½•è¡¨ç¤ºå¼ï¼Œ`{{}}` å°±æ˜¯åœ¨ `{}` å…§éƒ¨ç”¨ç‰©ä»¶å­—é¢é‡è¿”å›ä¸€å€‹ç‰©ä»¶è€Œå·²ã€‚

é€™æ™‚å€™ï¼Œé»è´ŠæŒ‰éˆ•çš„å…§éƒ¨å°±è¦ç”¨ `this.props.wordings` ä¾†ç²å–åˆ°åˆ°åƒæ•¸äº†ï¼š

```javascript
class LikeButton extends Component {
  function Object() { [native code] } () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    const wordings = this.props.wordings || {
      likedText: 'å–æ¶ˆ',
      unlikedText: 'é»è´Š'
    }
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked ? wordings.likedText : wordings.unlikedText} ğŸ‘
      </button>
    )
  }
}
```

ç”šè‡³å¯ä»¥å¾€å…ƒä»¶å…§éƒ¨å‚³å…¥å‡½æ•¸ä½œç‚ºåƒæ•¸ï¼š

```javascript
class Index extends Component {
  render () {
    return (
      <div>
        <LikeButton
          wordings={{likedText: 'å·²è´Š', unlikedText: 'è´Š'}}
          onClick={() => console.log('Click on like button!')}/>
      </div>
    )
  }
}
```

é€™æ¨£å¯ä»¥é€šé `this.props.onClick` ç²å–åˆ°é€™å€‹å‚³é€²å»çš„å‡½æ•¸ï¼Œä¿®æ”¹ `LikeButton ` çš„ `handleClickOnLikeButton` æ–¹æ³•ï¼š

```javascript
...
  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
    if (this.props.onClick) {
      this.props.onClick()
    }
  }
...
```

ç•¶æ¯æ¬¡é»é¸æŒ‰éˆ•çš„æ™‚å€™ï¼Œæ§åˆ¶æª¯æœƒé¡¯ç¤º `Click on like button!` ã€‚ä½†é€™å€‹è¡Œç‚ºä¸æ˜¯é»è´Šå…ƒä»¶è‡ªå·±å¯¦ç¾çš„ï¼Œè€Œæ˜¯æˆ‘å€‘å‚³é€²å»çš„ã€‚æ‰€ä»¥ï¼Œä¸€å€‹å…ƒä»¶çš„è¡Œç‚ºã€é¡¯ç¤ºå½¢æ…‹éƒ½å¯ä»¥ç”¨ `props` ä¾†æ§åˆ¶ï¼Œå°±å¯ä»¥é”åˆ°å¾ˆå¥½çš„å¯é…ç½®æ€§ã€‚

## é è¨­é…ç½® defaultProps
ä¸Šé¢çš„å…ƒä»¶é è¨­é…ç½®æˆ‘å€‘æ˜¯é€šé `||` æ“ä½œç¬¦ä¾†å¯¦ç¾ã€‚é€™ç¨®éœ€è¦é è¨­é…ç½®çš„æƒ…æ³åœ¨ React.js ä¸­éå¸¸å¸¸è¦‹ï¼Œæ‰€ä»¥ React.js ä¹Ÿæä¾›äº†ä¸€ç¨®æ–¹å¼ `defaultProps`ï¼Œå¯ä»¥æ–¹ä¾¿çš„åšåˆ°é è¨­é…ç½®ã€‚

```javascript
class LikeButton extends Component {
  static defaultProps = {
    likedText: 'å–æ¶ˆ',
    unlikedText: 'é»è´Š'
  }

  function Object() { [native code] } () {
    super()
    this.state = { isLiked: false }
  }

  handleClickOnLikeButton () {
    this.setState({
      isLiked: !this.state.isLiked
    })
  }

  render () {
    return (
      <button onClick={this.handleClickOnLikeButton.bind(this)}>
        {this.state.isLiked
          ? this.props.likedText
          : this.props.unlikedText} ğŸ‘
      </button>
    )
  }
}
```

æ³¨æ„ï¼Œæˆ‘å€‘çµ¦é»è´Šå…ƒä»¶åŠ ä¸Šäº†ä»¥ä¸‹çš„ç¨‹å¼ç¢¼ï¼š

```javascript
  static defaultProps = {
    likedText: 'å–æ¶ˆ',
    unlikedText: 'é»è´Š'
  }
```

`defaultProps` ä½œç‚ºé»è´ŠæŒ‰éˆ•å…ƒä»¶çš„é¡å±¬æ€§ï¼Œè£¡é¢æ˜¯å° `props` ä¸­å„å€‹å±¬æ€§çš„é è¨­é…ç½®ã€‚é€™æ¨£æˆ‘å€‘å°±ä¸éœ€è¦åˆ¤æ–·é…ç½®å±¬æ€§æ˜¯å¦å‚³é€²ä¾†äº†ï¼šå¦‚æœæ²’æœ‰å‚³é€²ä¾†ï¼Œæœƒç›´æ¥ä½¿ç”¨ `defaultProps` ä¸­çš„é è¨­å±¬æ€§ã€‚ æ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ `render` å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘æœƒç›´æ¥ä½¿ç”¨ `this.props` è€Œä¸éœ€è¦å†åšåˆ¤æ–·ã€‚

## props ä¸å¯è®Š
`props` ä¸€æ—¦å‚³å…¥é€²ä¾†å°±ä¸èƒ½æ”¹è®Šã€‚ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ä¸­çš„ `handleClickOnLikeButton` ï¼š

```javascript
...
  handleClickOnLikeButton () {
    this.props.likedText = 'å–æ¶ˆ'
    this.setState({
      isLiked: !this.state.isLiked
    })
  }
...
```

æˆ‘å€‘å˜—è©¦åœ¨ä½¿ç”¨è€…é»é¸æŒ‰éˆ•çš„æ™‚å€™æ”¹è®Š `this.props.likedText` ï¼Œç„¶å¾Œä½ æœƒçœ‹åˆ°æ§åˆ¶æª¯å ±éŒ¯äº†ï¼š

<a href="http://huzidaha.github.io/static/assets/img/posts/F170536D-CD3B-4828-B73E-33DC883A8E99.png" target="_blank">![React.js å°æ›¸æ•™ç¨‹åœ–ç‰‡](http://huzidaha.github.io/static/assets/img/posts/F170536D-CD3B-4828-B73E-33DC883A8E99.png)</a>

ä½ ä¸èƒ½æ”¹è®Šä¸€å€‹å…ƒä»¶è¢«æ¸²æŸ“çš„æ™‚å€™å‚³é€²ä¾†çš„ `props`ã€‚React.js  å¸Œæœ›ä¸€å€‹å…ƒä»¶åœ¨è¼¸å…¥ç¢ºå®šçš„ `props` çš„æ™‚å€™ï¼Œèƒ½å¤ è¼¸å‡ºç¢ºå®šçš„ UI é¡¯ç¤ºå½¢æ…‹ã€‚å¦‚æœ `props` æ¸²æŸ“éç¨‹ä¸­å¯ä»¥è¢«ä¿®æ”¹ï¼Œé‚£éº¼å°±æœƒå°è‡´é€™å€‹å…ƒä»¶é¡¯ç¤ºå½¢æ…‹å’Œè¡Œç‚ºè®Šå¾—ä¸å¯é æ¸¬ï¼Œé€™æ¨£æœƒå¯èƒ½æœƒçµ¦å…ƒä»¶ä½¿ç”¨è€…å¸¶ä¾†å›°æƒ‘ã€‚

ä½†é€™ä¸¦ä¸æ„å‘³è‘—ç”± `props` æ±ºå®šçš„é¡¯ç¤ºå½¢æ…‹ä¸èƒ½è¢«ä¿®æ”¹ã€‚å…ƒä»¶çš„ä½¿ç”¨è€…å¯ä»¥*ä¸»å‹•åœ°é€šéé‡æ–°æ¸²æŸ“çš„æ–¹å¼*æŠŠæ–°çš„ `props` å‚³å…¥å…ƒä»¶ç•¶ä¸­ï¼Œé€™æ¨£é€™å€‹å…ƒä»¶ä¸­ç”± `props` æ±ºå®šçš„é¡¯ç¤ºå½¢æ…‹ä¹Ÿæœƒå¾—åˆ°ç›¸æ‡‰çš„æ”¹è®Šã€‚

ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­çš„ `Index` å…ƒä»¶ï¼š

```javascript
class Index extends Component {
  function Object() { [native code] } () {
    super()
    this.state = {
      likedText: 'å·²è´Š',
      unlikedText: 'è´Š'
    }
  }

  handleClickOnChange () {
    this.setState({
      likedText: 'å–æ¶ˆ',
      unlikedText: 'é»è´Š'
    })
  }

  render () {
    return (
      <div>
        <LikeButton
          likedText={this.state.likedText}
          unlikedText={this.state.unlikedText} />
        <div>
          <button onClick={this.handleClickOnChange.bind(this)}>
            ä¿®æ”¹ wordings
          </button>
        </div>
      </div>
    )
  }
}
```

åœ¨é€™è£¡ï¼Œæˆ‘å€‘æŠŠ `Index` çš„ `state` ä¸­çš„ `likedText` å’Œ `unlikedText` å‚³çµ¦ `LikeButton` ã€‚`Index` é‚„æœ‰å¦å¤–ä¸€å€‹æŒ‰éˆ•ï¼Œé»é¸é€™å€‹æŒ‰éˆ•æœƒé€šé `setState` ä¿®æ”¹ `Index` çš„ `state` ä¸­çš„å…©å€‹å±¬æ€§ã€‚

ç”±æ–¼ `setState` æœƒå°è‡´ `Index` é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥ `LikedButton` æœƒæ¥æ”¶åˆ°æ–°çš„ `props`ï¼Œä¸¦ä¸”é‡æ–°æ¸²æŸ“ï¼Œæ–¼æ˜¯å®ƒçš„é¡¯ç¤ºå½¢æ…‹ä¹Ÿæœƒå¾—åˆ°æ›´æ–°ã€‚é€™å°±æ˜¯é€šéé‡æ–°æ¸²æŸ“çš„æ–¹å¼ä¾†å‚³å…¥æ–°çš„ `props` å¾è€Œé”åˆ°ä¿®æ”¹ `LikedButton` é¡¯ç¤ºå½¢æ…‹çš„æ•ˆæœã€‚

## ç¸½çµ
1. ç‚ºäº†ä½¿å¾—å…ƒä»¶çš„å¯å®šè£½æ€§æ›´å¼·ï¼Œåœ¨ä½¿ç”¨å…ƒä»¶çš„æ™‚å€™ï¼Œå¯ä»¥åœ¨æ¨™ç±¤ä¸ŠåŠ å±¬æ€§ä¾†å‚³å…¥é…ç½®åƒæ•¸ã€‚
2. å…ƒä»¶å¯ä»¥åœ¨å…§éƒ¨é€šé `this.props` ç²å–åˆ°é…ç½®åƒæ•¸ï¼Œå…ƒä»¶å¯ä»¥æ ¹æ“š `props`  çš„ä¸åŒä¾†ç¢ºå®šè‡ªå·±çš„é¡¯ç¤ºå½¢æ…‹ï¼Œé”åˆ°å¯é…ç½®çš„æ•ˆæœã€‚
3. å¯ä»¥é€šéçµ¦å…ƒä»¶æ–°å¢é¡å±¬æ€§ `defaultProps` ä¾†é…ç½®é è¨­åƒæ•¸ã€‚
4. `props` ä¸€æ—¦å‚³å…¥ï¼Œä½ å°±ä¸å¯ä»¥åœ¨å…ƒä»¶å…§éƒ¨å°å®ƒé€²è¡Œä¿®æ”¹ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šéçˆ¶å…ƒä»¶ä¸»å‹•é‡æ–°æ¸²æŸ“çš„æ–¹å¼ä¾†å‚³å…¥æ–°çš„ `props`ï¼Œå¾è€Œé”åˆ°æ›´æ–°çš„æ•ˆæœã€‚

{% endraw %}
